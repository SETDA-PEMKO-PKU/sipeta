@import "tailwindcss";

@import url("https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap");

/* Alpine.js cloak */
[x-cloak] {
    display: none !important;
}

@theme {
    --font-sans: "Inter", ui-sans-serif, system-ui, sans-serif;

    --color-primary-50: #f5f7ff;
    --color-primary-100: #ebefff;
    --color-primary-200: #d6dffe;
    --color-primary-300: #b3c1fd;
    --color-primary-400: #8a9bfa;
    --color-primary-500: #667eea;
    --color-primary-600: #5568d3;
    --color-primary-700: #4553b8;
    --color-primary-800: #3a4495;
    --color-primary-900: #333c78;
}

@layer components {
    /* Compact Card Component */
    .card {
        @apply bg-white rounded-lg shadow-sm border border-gray-200 transition-all duration-200;
    }

    .card:hover {
        @apply shadow-md;
    }

    .card-compact {
        @apply p-3;
    }

    .card-header {
        @apply px-4 py-2 border-b border-gray-100 bg-gray-50/50;
    }

    .card-body {
        @apply p-4;
    }

    /* Compact Button Components */
    .btn {
        @apply inline-flex items-center justify-center px-3 py-1.5 text-sm font-medium rounded-md transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2;
    }

    .btn-sm {
        @apply px-2 py-1 text-xs;
    }

    .btn-primary {
        @apply bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500;
    }

    .btn-secondary {
        @apply bg-gray-200 text-gray-700 hover:bg-gray-300 focus:ring-gray-500;
    }

    .btn-success {
        @apply bg-green-600 text-white hover:bg-green-700 focus:ring-green-500;
    }

    .btn-danger {
        @apply bg-red-600 text-white hover:bg-red-700 focus:ring-red-500;
    }

    .btn-outline {
        @apply border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:ring-gray-500;
    }

    /* Compact Badge Component */
    .badge {
        @apply inline-flex items-center px-2 py-0.5 text-xs font-medium rounded;
    }

    .badge-primary {
        @apply bg-primary-100 text-primary-800;
    }

    .badge-success {
        @apply bg-green-100 text-green-800;
    }

    .badge-warning {
        @apply bg-yellow-100 text-yellow-800;
    }

    .badge-danger {
        @apply bg-red-100 text-red-800;
    }

    .badge-gray {
        @apply bg-gray-100 text-gray-800;
    }

    /* Compact Stat Component */
    .stat-card {
        @apply bg-white rounded-lg shadow-sm border border-gray-200 p-3 hover:shadow-md transition-shadow duration-200;
    }

    .stat-value {
        @apply text-2xl font-bold text-gray-900;
    }

    .stat-label {
        @apply text-xs font-medium text-gray-500 uppercase tracking-wide;
    }

    /* Compact Header */
    .header-compact {
        @apply bg-gradient-to-r from-primary-600 to-primary-700 text-white py-4;
    }

    /* Enhanced Tree Component with Better Accessibility */
    .tree-node {
        @apply relative flex items-center gap-3 px-4 py-2.5 rounded-lg;
        @apply transition-all duration-200;
        @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary-500 focus-visible:ring-offset-2;
    }

    .tree-node:hover {
        @apply shadow-sm transform translate-x-1;
    }

    /* Kepala OPD - Level 0 */
    .tree-node-kepala {
        @apply bg-gradient-to-r from-amber-50 via-amber-100/90 to-amber-50;
        @apply border-l-4 border-amber-500 shadow-md;
        @apply font-semibold text-base text-gray-900;
        @apply mb-3;
    }

    .tree-node-kepala:hover {
        @apply from-amber-100 via-amber-200/90 to-amber-100 shadow-lg;
    }

    /* Bagian - Level 1 */
    .tree-node-bagian {
        @apply bg-gradient-to-r from-blue-50 via-blue-100/90 to-blue-50;
        @apply border-l-4 border-blue-500 shadow;
        @apply font-semibold text-sm text-gray-900;
        @apply mb-2;
    }

    .tree-node-bagian:hover {
        @apply from-blue-100 via-blue-200/90 to-blue-100 shadow-md;
    }

    /* Sub-Bagian - Level 2+ */
    .tree-node-sub-bagian {
        @apply bg-gradient-to-r from-indigo-50 via-indigo-100/80 to-indigo-50;
        @apply border-l-3 border-indigo-400;
        @apply font-medium text-sm text-gray-800;
        @apply mb-1.5;
    }

    .tree-node-sub-bagian:hover {
        @apply from-indigo-100 via-indigo-200/80 to-indigo-100 shadow-sm;
    }

    /* Jabatan - Level 2 */
    .tree-node-jabatan {
        @apply bg-white border-l-3 border-green-500;
        @apply font-normal text-sm text-gray-800;
        @apply hover:bg-green-50/50 hover:border-green-600;
        @apply mb-1;
    }

    /* ASN - Level 3 */
    .tree-node-asn {
        @apply bg-purple-50/30 border-l-2 border-purple-400;
        @apply font-normal text-xs text-gray-700;
        @apply hover:bg-purple-100/40 hover:border-purple-500;
    }

    /* Tree structure lines */
    .tree-children {
        @apply relative ml-6 pl-4;
        @apply border-l-2 border-gray-200;
    }

    .tree-children::before {
        content: "";
        @apply absolute left-0 top-0 w-full h-full;
        @apply border-l-2 border-dashed border-gray-300;
    }

    /* Action buttons */
    .tree-actions {
        @apply flex gap-1 opacity-0 transition-opacity duration-200;
    }

    .tree-node:hover .tree-actions,
    .tree-node:focus-within .tree-actions {
        @apply opacity-100;
    }

    /* Toggle button */
    .tree-toggle {
        @apply flex-shrink-0 w-5 h-5 flex items-center justify-center;
        @apply rounded hover:bg-white/50;
        @apply transition-all duration-200;
        @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary-400;
    }

    .tree-toggle:hover {
        @apply bg-white shadow-sm;
    }

    /* Compact Input */
    .input {
        @apply block w-full px-3 py-1.5 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors duration-200;
    }

    /* Fix untuk select double border */
    select.input {
        @apply appearance-none bg-white;
        background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
        background-position: right 0.5rem center;
        background-repeat: no-repeat;
        background-size: 1.5em 1.5em;
        padding-right: 2.5rem;
    }

    /* Reset outline default untuk input dan select */
    .input,
    select.input,
    input.input,
    textarea.input {
        @apply outline-none;
    }

    .input:focus,
    select.input:focus,
    input.input:focus,
    textarea.input:focus {
        @apply outline-none ring-2 ring-primary-500 border-primary-500;
    }

    /* Compact Alert */
    .alert {
        @apply px-3 py-2 rounded-md text-sm;
    }

    .alert-success {
        @apply bg-green-50 text-green-800 border border-green-200;
    }

    .alert-error {
        @apply bg-red-50 text-red-800 border border-red-200;
    }

    .alert-warning {
        @apply bg-yellow-50 text-yellow-800 border border-yellow-200;
    }

    .alert-info {
        @apply bg-blue-50 text-blue-800 border border-blue-200;
    }
}

@layer utilities {
    /* Compact spacing utilities */
    .space-compact > * + * {
        @apply mt-2;
    }

    .gap-compact {
        @apply gap-2;
    }

    /* Text utilities */
    .text-compact {
        @apply text-sm leading-tight;
    }

    /* Animation utilities */
    .animate-fade-in {
        animation: fadeIn 0.3s ease-out;
    }

    .animate-slide-up {
        animation: slideUp 0.3s ease-out;
    }

    @keyframes fadeIn {
        from {
            opacity: 0;
        }
        to {
            opacity: 1;
        }
    }

    @keyframes slideUp {
        from {
            opacity: 0;
            transform: translateY(10px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
}

/* Custom scrollbar for better aesthetics */
::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

::-webkit-scrollbar-track {
    @apply bg-gray-100;
}

::-webkit-scrollbar-thumb {
    @apply bg-gray-300 rounded-full;
}

::-webkit-scrollbar-thumb:hover {
    @apply bg-gray-400;
}

/* Tom Select Custom Styling - Fix Double Border */
.ts-wrapper {
    /* Remove any inherited styling from .input class */
    border: none !important;
    padding: 0 !important;
    box-shadow: none !important;
    outline: none !important;
}

.ts-wrapper.single .ts-control,
.ts-wrapper.multi .ts-control {
    border: 1px solid #d1d5db !important;
    border-radius: 0.375rem !important;
    padding: 0.375rem 0.75rem !important;
    background-color: white !important;
    box-shadow: none !important;
    outline: none !important;
    min-height: 38px !important;
}

.ts-wrapper.single .ts-control:focus,
.ts-wrapper.multi .ts-control:focus {
    border-color: #667eea !important;
    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1) !important;
    outline: none !important;
}

.ts-wrapper.single .ts-control:hover,
.ts-wrapper.multi .ts-control:hover {
    border-color: #9ca3af;
}

/* Remove default dropdown arrow for single select */
.ts-wrapper.single .ts-control:after {
    border-color: #6b7280 transparent transparent;
    border-width: 5px 5px 0;
    margin-top: -2px;
}

/* Tom Select Dropdown */
.ts-dropdown {
    border: 1px solid #d1d5db !important;
    border-radius: 0.375rem;
    box-shadow:
        0 4px 6px -1px rgba(0, 0, 0, 0.1),
        0 2px 4px -1px rgba(0, 0, 0, 0.06) !important;
    margin-top: 0.25rem;
}

.ts-dropdown .ts-dropdown-content {
    max-height: 300px;
}

.ts-dropdown .option {
    padding: 0.5rem 0.75rem;
    font-size: 0.875rem;
}

.ts-dropdown .option:hover,
.ts-dropdown .option.active {
    background-color: #f3f4f6;
    color: #111827;
}

.ts-dropdown .option.selected {
    background-color: #eff6ff;
    color: #3b82f6;
    font-weight: 500;
}

/* Tom Select Input */
.ts-wrapper.single .ts-control input,
.ts-wrapper.multi .ts-control input {
    font-size: 0.875rem;
    color: #111827;
}

/* Placeholder */
.ts-wrapper .ts-control input::placeholder {
    color: #9ca3af;
}

/* Multi-select items */
.ts-wrapper.multi .ts-control > div {
    background-color: #eff6ff;
    border: 1px solid #bfdbfe;
    border-radius: 0.25rem;
    padding: 0.125rem 0.5rem;
    margin: 0.125rem 0.25rem 0.125rem 0;
    color: #1e40af;
    font-size: 0.875rem;
}

.ts-wrapper.multi .ts-control > div .remove {
    border-left-color: #bfdbfe;
}

.ts-wrapper.multi .ts-control > div .remove:hover {
    background-color: #dc2626;
    color: white;
}
